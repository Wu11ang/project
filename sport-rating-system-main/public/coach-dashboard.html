<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–∞–Ω–µ–ª—å —Ç—Ä–µ–Ω–µ—Ä–∞ - –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="variables.css">
    <link rel="stylesheet" href="styles.css?v=1.1">
</head>

<body class="modern-theme">
    <div class="mesh-background"></div>
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">ORTUS <span>COACH</span></div>
            <button class="nav-toggle" aria-label="–ú–µ–Ω—é">&#9776;</button>
            <ul class="nav-menu">
                <li><a href="#" data-page="dashboard" class="nav-link active">–î–∞—à–±–æ—Ä–¥</a></li>
                <li><a href="#" data-page="my-athletes" class="nav-link">–ú–æ–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã</a></li>
                <li><a href="#" data-page="pending" class="nav-link">
                        –ó–∞—è–≤–∫–∏ <span id="pending-count" class="badge">0</span>
                    </a></li>
                <li><a href="#" data-page="competitions" class="nav-link">–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è</a></li>
                <li><a href="#" data-page="schedule" class="nav-link">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a></li>
                <li><a href="#" data-page="branch-athletes" class="nav-link">–§–∏–ª–∏–∞–ª</a></li>
                <li><a href="#" data-page="ratings" class="nav-link">–†–µ–π—Ç–∏–Ω–≥</a></li>
                <li><a href="#" data-page="ai" class="nav-link ai-nav-link">ü§ñ AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç</a></li>
                <li><a href="leaderboard.html" target="_blank" class="nav-link">–≠–∫—Ä–∞–Ω</a></li>
            </ul>
            <div class="nav-user">
                <div class="nav-actions" style="display: flex; align-items: center; gap: 1rem; margin-right: 1.5rem;">
                    <div class="notification-bell" onclick="toggleNotifications()">
                        <span class="bell-icon">üîî</span>
                        <span class="notification-badge" id="notification-badge" style="display: none;">0</span>
                    </div>
                    <!-- Notification Dropdown -->
                    <div class="notification-dropdown" id="notification-dropdown">
                        <div class="notification-dropdown-header">
                            <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                            <button onclick="markAllAsRead()" class="mark-read-btn">–ü—Ä–æ—á–∏—Ç–∞—Ç—å –≤—Å–µ</button>
                        </div>
                        <div class="notification-dropdown-body" id="notification-dropdown-body">
                            <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
                <div class="user-profile-trigger" id="user-menu-trigger">
                    <div class="user-avatar-container">
                        <img id="nav-user-photo" src="" alt="" style="display: none;">
                        <span class="user-avatar-placeholder">üë§</span>
                    </div>
                    <div class="user-info-brief">
                        <span id="user-name" class="user-name-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <span id="nav-user-role" class="user-role-text">–¢—Ä–µ–Ω–µ—Ä</span>
                    </div>
                    <span style="font-size: 0.6rem; opacity: 0.5;">‚ñº</span>
                </div>

                <div class="user-dropdown-menu" id="user-dropdown">
                    <div class="dropdown-header">
                        <span id="dropdown-full-name" class="full-name">-</span>
                        <span class="role-label">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</span>
                    </div>
                    <button class="dropdown-item" onclick="showPage('profile'); closeUserMenu()">
                        <span>üë§</span> –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                    </button>
                    <div class="dropdown-divider"></div>
                    <button class="dropdown-item danger" onclick="logout()">
                        <span>üö™</span> –í—ã–π—Ç–∏
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container main-content">
        <!-- Dashboard Summary -->
        <div id="dashboard-page" class="page active">
            <div class="page-header">
                <h1>–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã</h1>
            </div>
            <div class="stats-grid">
                <div class="stat-card primary">
                    <span class="label">–ú–æ–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã</span>
                    <span class="value" id="stats-my-athletes">-</span>
                </div>
                <div class="stat-card warning">
                    <span class="label">–ù–æ–≤—ã–µ –∑–∞—è–≤–∫–∏</span>
                    <span class="value" id="stats-pending">-</span>
                </div>
                <div class="stat-card success">
                    <span class="label">–í—Å–µ–≥–æ –æ—á–∫–æ–≤</span>
                    <span class="value" id="stats-total-points">-</span>
                </div>
            </div>

            <div class="dashboard-grid" style="margin-top: 2rem;">
                <div class="dashboard-column">
                    <div class="section-title">–ë–ª–∏–∂–∞–π—à–∏–µ —Ç—É—Ä–Ω–∏—Ä—ã</div>
                    <div class="card" id="upcoming-competitions-widget">
                        <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                </div>
                <div class="dashboard-column">
                    <div class="section-title">–¢–æ–ø –º–æ–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤</div>
                    <div class="card" id="top-students-widget">
                        <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                    <div style="margin-top: 1.5rem;">
                        <div class="section-title">–õ–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π</div>
                        <div class="card" id="activity-feed-widget" style="max-height: 300px; overflow-y: auto;">
                            <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- My Athletes Page -->
        <div id="my-athletes-page" class="page">
            <div class="page-header">
                <h1>–ú–æ–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã</h1>
            </div>
            <div class="card">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–§–ò–û</th>
                            <th>–ü–æ–ª</th>
                            <th>–í–µ—Å</th>
                            <th>–†–æ—Å—Ç</th>
                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                            <th>–ü–æ—è—Å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody id="athletes-tbody">
                        <tr>
                            <td colspan="7" class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pending Approvals Page -->
        <div id="pending-page" class="page">
            <div class="page-header">
                <h1>–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h1>
            </div>
            <div id="pending-list">
                <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>

        <!-- Competitions Page -->
        <div id="competitions-page" class="page">
            <div class="page-header">
                <h1>–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è</h1>
                <button class="btn btn-primary" onclick="showCompetitionModal()">+ –°–æ–∑–¥–∞—Ç—å —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ</button>
            </div>
            <div id="competitions-list" class="competitions-grid">
                <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>
        </div>

        <!-- Competition Detail Page (Wizard) -->
        <div id="competition-detail-page" class="page">
            <div class="page-header">
                <button class="btn btn-secondary" onclick="showPage('competitions')">‚Üê –ù–∞–∑–∞–¥</button>
                <h1 id="competition-title">–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ</h1>
            </div>

            <!-- Stepper -->
            <div class="wizard-stepper">
                <div class="wizard-step active" data-step="1" onclick="goToWizardStep(1)">
                    <div class="wizard-step-num">1</div>
                    <div class="wizard-step-label">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                </div>
                <div class="wizard-step-line"></div>
                <div class="wizard-step" data-step="2" onclick="goToWizardStep(2)">
                    <div class="wizard-step-num">2</div>
                    <div class="wizard-step-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
                </div>
                <div class="wizard-step-line"></div>
                <div class="wizard-step" data-step="3" onclick="goToWizardStep(3)">
                    <div class="wizard-step-num">3</div>
                    <div class="wizard-step-label">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</div>
                </div>
                <div class="wizard-step-line"></div>
                <div class="wizard-step" data-step="4" onclick="goToWizardStep(4)">
                    <div class="wizard-step-num">4</div>
                    <div class="wizard-step-label">–°–µ—Ç–∫–∞</div>
                </div>
                <div class="wizard-step-line"></div>
                <div class="wizard-step" data-step="5" onclick="goToWizardStep(5)">
                    <div class="wizard-step-num">5</div>
                    <div class="wizard-step-label">–ú–∞—Ç—á–∏</div>
                </div>
                <div class="wizard-step-line"></div>
                <div class="wizard-step" data-step="6" onclick="goToWizardStep(6)">
                    <div class="wizard-step-num">6</div>
                    <div class="wizard-step-label">–ò—Ç–æ–≥–∏</div>
                </div>
            </div>

            <!-- Step 1: Info -->
            <div class="wizard-panel" id="wizard-step-1">
                <div class="card">
                    <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–∏</h2>
                    <div id="competition-info"></div>
                </div>
                <div class="wizard-nav">
                    <span></span>
                    <button class="btn btn-primary" onclick="goToWizardStep(2)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- Step 2: Categories -->
            <div class="wizard-panel" id="wizard-step-2" style="display:none;">
                <div class="card">
                    <h2>–í–µ—Å–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</h2>
                    <div id="competition-categories-list"></div>
                    <div style="display: flex; gap: 0.5rem; margin-top: 1rem; align-items: center; flex-wrap: wrap;">
                        <select id="add-cat-weight" class="select" style="flex: 2; min-width: 120px;">
                            <option value="">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</option>
                            <option value="50 –∫–≥">50 –∫–≥</option>
                            <option value="55 –∫–≥">55 –∫–≥</option>
                            <option value="60 –∫–≥">60 –∫–≥</option>
                            <option value="66 –∫–≥">66 –∫–≥</option>
                            <option value="73 –∫–≥">73 –∫–≥</option>
                            <option value="81 –∫–≥">81 –∫–≥</option>
                            <option value="90 –∫–≥">90 –∫–≥</option>
                            <option value="100 –∫–≥">100 –∫–≥</option>
                            <option value="+100 –∫–≥">+100 –∫–≥</option>
                            <option value="40 –∫–≥">40 –∫–≥</option>
                            <option value="44 –∫–≥">44 –∫–≥</option>
                            <option value="48 –∫–≥">48 –∫–≥</option>
                            <option value="52 –∫–≥">52 –∫–≥</option>
                            <option value="57 –∫–≥">57 –∫–≥</option>
                            <option value="63 –∫–≥">63 –∫–≥</option>
                            <option value="70 –∫–≥">70 –∫–≥</option>
                            <option value="78 –∫–≥">78 –∫–≥</option>
                            <option value="+78 –∫–≥">+78 –∫–≥</option>
                        </select>
                        <select id="add-cat-gender" class="select" style="flex: 1; min-width: 80px;">
                            <option value="M">–ú</option>
                            <option value="F">–ñ</option>
                        </select>
                        <button class="btn btn-primary btn-sm" onclick="addCategoryToCompetition()">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                </div>
                <div class="wizard-nav">
                    <button class="btn btn-secondary" onclick="goToWizardStep(1)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToWizardStep(3)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- Step 3: Registration -->
            <div class="wizard-panel" id="wizard-step-3" style="display:none;">
                <div class="card">
                    <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤</h2>
                    <button class="btn btn-primary btn-sm" onclick="showRegisterAthleteModal()" style="margin-bottom: 1rem;">+ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞</button>
                    <div id="registrations-list"></div>
                </div>
                <div class="wizard-nav">
                    <button class="btn btn-secondary" onclick="goToWizardStep(2)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToWizardStep(4)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- Step 4: Bracket Generation -->
            <div class="wizard-panel" id="wizard-step-4" style="display:none;">
                <div class="card">
                    <h2>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–µ—Ç–∫–∞</h2>
                    <div id="bracket-step-content">
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">–ö–æ–≥–¥–∞ –≤—Å–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç—É—Ä–Ω–∏—Ä–Ω—É—é —Å–µ—Ç–∫—É.</p>
                        <button class="btn btn-success" onclick="generateBracket()">–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç–∫—É</button>
                        <a id="view-bracket-link" href="#" target="_blank" class="btn btn-secondary" style="display:none; margin-left: 0.5rem;">–û—Ç–∫—Ä—ã—Ç—å —Å–µ—Ç–∫—É</a>
                    </div>
                </div>
                <div class="wizard-nav">
                    <button class="btn btn-secondary" onclick="goToWizardStep(3)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToWizardStep(5)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- Step 5: Matches / Sparrings -->
            <div class="wizard-panel" id="wizard-step-5" style="display:none;">
                <div class="card">
                    <h2>–°–ø–∞—Ä—Ä–∏–Ω–≥–∏ –∏ –±–æ–∏</h2>
                    <button class="btn btn-primary btn-sm" onclick="showSparringModal()" style="margin-bottom: 1rem;">+ –°–æ–∑–¥–∞—Ç—å —Å–ø–∞—Ä—Ä–∏–Ω–≥</button>
                    <div id="sparrings-list"></div>
                </div>
                <div class="wizard-nav">
                    <button class="btn btn-secondary" onclick="goToWizardStep(4)">‚Üê –ù–∞–∑–∞–¥</button>
                    <button class="btn btn-primary" onclick="goToWizardStep(6)">–î–∞–ª–µ–µ ‚Üí</button>
                </div>
            </div>

            <!-- Step 6: Results -->
            <div class="wizard-panel" id="wizard-step-6" style="display:none;">
                <div class="card">
                    <h2>–ò—Ç–æ–≥–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è</h2>
                    <div id="competition-results"></div>
                </div>
                <div class="wizard-nav">
                    <button class="btn btn-secondary" onclick="goToWizardStep(5)">‚Üê –ù–∞–∑–∞–¥</button>
                    <span></span>
                </div>
            </div>
        </div>

        <!-- Schedule Page -->
        <div id="schedule-page" class="page">
            <div class="page-header">
                <h1>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</h1>
                <button class="btn btn-primary" onclick="showScheduleModal()">+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</button>
            </div>
            <div class="card">
                <h2>–ú–æ—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                <div id="schedule-list">
                    <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
            <div class="card">
                <h2>–ó–∞–ø–∏—Å–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
                <div id="bookings-list">
                    <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
            <div class="card">
                <h2>–ü–æ–¥–ø–∏—Å–∫–∏ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤</h2>
                <button class="btn btn-primary btn-sm" onclick="showSubscriptionModal()" style="margin-bottom:1rem;">+
                    –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
                <div id="subscriptions-list">
                    <p class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                </div>
            </div>
        </div>

        <!-- Branch Athletes Page -->
        <div id="branch-athletes-page" class="page">
            <div class="page-header">
                <h1>–°–ø–æ—Ä—Ç—Å–º–µ–Ω—ã —Ñ–∏–ª–∏–∞–ª–∞</h1>
                <button onclick="openBranchPage()" class="btn btn-primary">–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ñ–∏–ª–∏–∞–ª–∞</button>
            </div>
            <div class="card">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–§–ò–û</th>
                            <th>–¢—Ä–µ–Ω–µ—Ä</th>
                            <th>–ü–æ–ª</th>
                            <th>–í–µ—Å</th>
                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                            <th>–ü–æ—è—Å</th>
                        </tr>
                    </thead>
                    <tbody id="branch-athletes-tbody">
                        <tr>
                            <td colspan="6" class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- AI Assistant Page -->
        <div id="ai-page" class="page">
            <div class="page-header">
                <h1>AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç <span class="badge badge-ai">Beta</span></h1>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-column">
                    <div class="ai-hero-card">
                        <div class="ai-orb"></div>
                        <h2>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑</h2>
                        <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞—É–¥–∏—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤–∞—à–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
                        </p>
                        <button class="btn btn-primary btn-ai" onclick="generateAIAnalysis()">–ü—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç
                            —Ñ–∏–ª–∏–∞–ª–∞</button>
                    </div>

                    <div id="ai-insights-container" style="margin-top: 1.5rem;">
                        <!-- Insights will be injected here -->
                    </div>
                </div>

                <div class="dashboard-column">
                    <div class="card ai-chat-card">
                        <div class="card-header">
                            <h3>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä—Ç–∞</h3>
                        </div>
                        <div id="ai-chat-messages" class="ai-chat-messages">
                            <div class="ai-msg bot">–ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –û —á–µ–º –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?
                            </div>
                        </div>
                        <div class="ai-chat-input-area">
                            <input type="text" id="ai-chat-input" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ —Ç–µ—Ö–Ω–∏–∫–µ, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ..."
                                onkeypress="if(event.key==='Enter') sendAIChat()">
                            <button class="btn btn-primary btn-circle" onclick="sendAIChat()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ratings Page -->
        <div id="ratings-page" class="page">
            <div class="page-header">
                <h1>–†–µ–π—Ç–∏–Ω–≥</h1>
                <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;">
                    <select id="ratings-season-selector" class="season-select" onchange="onRatingsSeasonChange()">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞...</option>
                    </select>
                    <label style="cursor:pointer;display:inline-flex;align-items:center;gap:0.4rem;font-weight:600;font-size:0.85rem;">
                        <input type="checkbox" id="ratings-only-mine" onchange="onRatingsFilterChange()"> –¢–æ–ª—å–∫–æ –º–æ–∏
                    </label>
                </div>
            </div>
            <div class="card">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–ú–µ—Å—Ç–æ</th>
                            <th>–°–ø–æ—Ä—Ç—Å–º–µ–Ω</th>
                            <th>–ü–æ—è—Å</th>
                            <th>–û—á–∫–∏</th>
                            <th>W/L</th>
                            <th>–ë–æ—ë–≤</th>
                        </tr>
                    </thead>
                    <tbody id="ratings-tbody">
                        <tr>
                            <td colspan="6" class="text-center">–ó–∞–≥—Ä—É–∑–∫–∞...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile-page" class="page">
            <div class="page-header">
                <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
            </div>

            <div class="profile-container">
                <div class="profile-sidebar">
                    <div class="profile-section-card" style="text-align: center;">
                        <div class="profile-photo-section">
                            <img id="profile-photo-display" src="/placeholder-avatar.png" alt="–ü—Ä–æ—Ñ–∏–ª—å">
                            <label for="profile-photo-input" class="photo-upload-overlay">
                                üì∑
                                <input type="file" id="profile-photo-input" hidden accept="image/*">
                            </label>
                        </div>
                        <h2 id="profile-full-name" style="margin-bottom: 0.5rem;">-</h2>
                        <p id="profile-role-tag" class="hero-meta">-</p>
                    </div>
                </div>

                <div class="profile-main">
                    <div class="profile-section-card">
                        <h2 class="profile-section-title">üìù –õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                        <form id="profile-info-form">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                                <div class="profile-form-group">
                                    <label>–ò–º—è</label>
                                    <input type="text" id="profile-first-name" class="profile-input" required>
                                </div>
                                <div class="profile-form-group">
                                    <label>–§–∞–º–∏–ª–∏—è</label>
                                    <input type="text" id="profile-last-name" class="profile-input" required>
                                </div>
                            </div>
                            <div class="profile-form-group">
                                <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                                <input type="tel" id="profile-phone" class="profile-input" required>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                                –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                        </form>
                    </div>

                    <div class="profile-section-card">
                        <h2 class="profile-section-title">üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
                        <form id="profile-password-form">
                            <div class="profile-form-group">
                                <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="profile-current-password" class="profile-input" required>
                            </div>
                            <div class="profile-form-group">
                                <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="profile-new-password" class="profile-input" required
                                    minlength="6">
                            </div>
                            <div class="profile-form-group">
                                <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                                <input type="password" id="profile-confirm-password" class="profile-input" required
                                    minlength="6">
                            </div>
                            <button type="submit" class="btn btn-secondary" style="width: 100%;">–ò–∑–º–µ–Ω–∏—Ç—å
                                –ø–∞—Ä–æ–ª—å</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Edit Athlete Modal -->
        <div id="edit-athlete-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞</h2>
                    <span class="close" onclick="closeModal('edit-athlete-modal')">&times;</span>
                </div>
                <form id="edit-athlete-form" class="modal-body">
                    <input type="hidden" id="edit-athlete-id">
                    <div class="form-group">
                        <label>–í–µ—Å (–∫–≥)</label>
                        <input type="number" step="0.1" id="edit-weight" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–†–æ—Å—Ç (—Å–º)</label>
                        <input type="number" id="edit-height" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–ü–æ—è—Å</label>
                        <select id="edit-belt" class="select" required>
                            <option value="–±–µ–ª—ã–π">–ë–µ–ª—ã–π</option>
                            <option value="–∂—ë–ª—Ç—ã–π">–ñ—ë–ª—Ç—ã–π</option>
                            <option value="–æ—Ä–∞–Ω–∂–µ–≤—ã–π">–û—Ä–∞–Ω–∂–µ–≤—ã–π</option>
                            <option value="–∑–µ–ª—ë–Ω—ã–π">–ó–µ–ª—ë–Ω—ã–π</option>
                            <option value="—Å–∏–Ω–∏–π">–°–∏–Ω–∏–π</option>
                            <option value="–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π">–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π</option>
                            <option value="—á—ë—Ä–Ω—ã–π">–ß—ë—Ä–Ω—ã–π</option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('edit-athlete-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Competition Modal -->
        <div id="competition-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞—Ç—å —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ</h2>
                    <span class="close" onclick="closeModal('competition-modal')">&times;</span>
                </div>
                <form id="competition-form" class="modal-body">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" name="name" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞</label>
                        <input type="date" name="competition_date" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–ú–µ—Å—Ç–æ</label>
                        <input type="text" name="location" class="input">
                    </div>
                    <div class="form-group">
                        <label>–£—Ä–æ–≤–µ–Ω—å</label>
                        <select name="level" class="select" required>
                            <option value="club">–ö–ª—É–±–Ω–æ–µ</option>
                            <option value="city">–ì–æ—Ä–æ–¥—Å–∫–æ–µ</option>
                            <option value="regional">–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–µ</option>
                            <option value="national">–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ</option>
                            <option value="international">–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–°–µ–∑–æ–Ω</label>
                        <select name="season_id" id="comp-season-select" class="select"></select>
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea name="description" class="input" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>–í–µ—Å–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                        <div id="comp-categories-list"></div>
                        <button type="button" class="btn btn-sm btn-secondary" onclick="addCategoryRow()"
                            style="margin-top: 0.5rem;">+ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('competition-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Register Athlete Modal -->
        <div id="register-athlete-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞</h2>
                    <span class="close" onclick="closeModal('register-athlete-modal')">&times;</span>
                </div>
                <form id="register-athlete-form" class="modal-body">
                    <div class="form-group">
                        <label>–°–ø–æ—Ä—Ç—Å–º–µ–Ω</label>
                        <select id="reg-athlete-select" class="select" required></select>
                    </div>
                    <div class="form-group">
                        <label>–í–µ—Å–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="reg-category-select" class="select" required></select>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('register-athlete-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Sparring Modal -->
        <div id="sparring-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞—Ç—å —Å–ø–∞—Ä—Ä–∏–Ω–≥</h2>
                    <span class="close" onclick="closeModal('sparring-modal')">&times;</span>
                </div>
                <form id="sparring-form" class="modal-body">
                    <div class="form-group">
                        <label>–í–µ—Å–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <select id="spar-category-select" class="select" required></select>
                    </div>
                    <div class="form-group">
                        <label>–°–ø–æ—Ä—Ç—Å–º–µ–Ω 1</label>
                        <select id="spar-athlete1-select" class="select" required></select>
                    </div>
                    <div class="form-group">
                        <label>–°–ø–æ—Ä—Ç—Å–º–µ–Ω 2</label>
                        <select id="spar-athlete2-select" class="select" required></select>
                    </div>
                    <div class="form-group">
                        <label>–†–∞—É–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</label>
                        <input type="text" id="spar-round" class="input" placeholder="–ß–µ—Ç–≤–µ—Ä—Ç—å—Ñ–∏–Ω–∞–ª, –ü–æ–ª—É—Ñ–∏–Ω–∞–ª...">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('sparring-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Fight Result Modal -->
        <div id="fight-modal" class="modal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–æ—è</h2>
                    <span class="close" onclick="closeModal('fight-modal')">&times;</span>
                </div>
                <form id="fight-form" class="modal-body">
                    <input type="hidden" id="fight-sparring-id">
                    <div id="fight-athletes-info" style="margin-bottom: 1rem;"></div>

                    <div class="form-group">
                        <label>–ü–æ–±–µ–¥–∏—Ç–µ–ª—å</label>
                        <select id="fight-winner-select" class="select" required></select>
                    </div>

                    <div class="form-group">
                        <label>–¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</label>
                        <select id="fight-result-type" class="select" required onchange="onResultTypeChange()">
                            <option value="ippon">–ò–ø–ø–æ–Ω (10 –±–∞–ª–ª–æ–≤)</option>
                            <option value="wazari">–í–∞–∑–∞-–∞—Ä–∏ (7 –±–∞–ª–ª–æ–≤)</option>
                            <option value="yuko">–Æ–∫–æ (5 –±–∞–ª–ª–æ–≤)</option>
                            <option value="shido">–®–∏–¥–æ (3 –±–∞–ª–ª–∞ ‚Äî —à—Ç—Ä–∞—Ñ —Å–æ–ø–µ—Ä–Ω–∏–∫—É)</option>
                            <option value="points">–ü–æ –±–∞–ª–ª–∞–º</option>
                            <option value="disqualification">–î–∏—Å–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è</option>
                        </select>
                    </div>

                    <div id="fight-auto-points-info"
                        style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 6px; padding: 0.75rem; margin-bottom: 1rem;">
                        <strong>–ò–ø–ø–æ–Ω</strong> ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ <strong>10 –±–∞–ª–ª–æ–≤</strong> –ø–æ–±–µ–¥–∏—Ç–µ–ª—é
                    </div>

                    <div class="form-group">
                        <label>–°—á—ë—Ç —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞ 1</label>
                        <input type="number" id="fight-score1" class="input" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>–°—á—ë—Ç —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞ 2</label>
                        <input type="number" id="fight-score2" class="input" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                        <textarea id="fight-notes" class="input" rows="2"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('fight-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç</button>
                    </div>
                </form>

                <!-- Score History -->
                <div id="fight-score-history" style="padding: 0 1.5rem 1.5rem; display: none;">
                    <h3 style="margin-bottom: 0.75rem;">–ò—Å—Ç–æ—Ä–∏—è –æ—á–∫–æ–≤ —Å–ø–∞—Ä—Ä–∏–Ω–≥–∞</h3>
                    <div id="fight-score-history-list"></div>
                </div>
            </div>
        </div>

        <!-- Schedule Modal -->
        <div id="schedule-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–î–æ–±–∞–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ</h2>
                    <span class="close" onclick="closeModal('schedule-modal')">&times;</span>
                </div>
                <form id="schedule-form" class="modal-body">
                    <div class="form-group">
                        <label>–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</label>
                        <select id="sched-day" class="select" required>
                            <option value="0">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                            <option value="1">–í—Ç–æ—Ä–Ω–∏–∫</option>
                            <option value="2">–°—Ä–µ–¥–∞</option>
                            <option value="3">–ß–µ—Ç–≤–µ—Ä–≥</option>
                            <option value="4">–ü—è—Ç–Ω–∏—Ü–∞</option>
                            <option value="5">–°—É–±–±–æ—Ç–∞</option>
                            <option value="6">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ù–∞—á–∞–ª–æ</label>
                        <input type="time" id="sched-start" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–Ω–µ—Ü</label>
                        <input type="time" id="sched-end" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–ü–ª–∞—Ç–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</label>
                        <select id="sched-paid" class="select">
                            <option value="0">–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è</option>
                            <option value="1">–ü–ª–∞—Ç–Ω–∞—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ (—Ç–≥)</label>
                        <input type="number" id="sched-price" class="input" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label>
                        <input type="number" id="sched-max" class="input" value="20" min="1">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="sched-desc" class="input" rows="2"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('schedule-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Subscription Modal -->
        <div id="subscription-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>–°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</h2>
                    <span class="close" onclick="closeModal('subscription-modal')">&times;</span>
                </div>
                <form id="subscription-form" class="modal-body">
                    <div class="form-group">
                        <label>–°–ø–æ—Ä—Ç—Å–º–µ–Ω</label>
                        <select id="sub-athlete" class="select" required></select>
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø</label>
                        <select id="sub-type" class="select" required>
                            <option value="monthly">–ú–µ—Å—è—á–Ω–∞—è</option>
                            <option value="quarterly">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è</option>
                            <option value="yearly">–ì–æ–¥–æ–≤–∞—è</option>
                            <option value="per_session">–ü–æ –∑–∞–Ω—è—Ç–∏—è–º</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
                        <input type="date" id="sub-start" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
                        <input type="date" id="sub-end" class="input" required>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ–ª-–≤–æ –∑–∞–Ω—è—Ç–∏–π (–¥–ª—è —Ç–∏–ø–∞ "–ü–æ –∑–∞–Ω—è—Ç–∏—è–º")</label>
                        <input type="number" id="sub-sessions" class="input" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ (—Ç–≥)</label>
                        <input type="number" id="sub-price" class="input" required min="0">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeModal('subscription-modal')">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <script src="ui-utils.js"></script>
        <script src="coach-dashboard.js"></script>
        <script src="notifications.js"></script>
</body>

</html>